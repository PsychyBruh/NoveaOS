import"../shell/shell.js";import*as e from"../../core/sdk/sdk.js";import*as t from"../../ui/legacy/legacy.js";import*as o from"../../core/i18n/i18n.js";import*as i from"../../core/common/common.js";import*as n from"../../models/issues_manager/issues_manager.js";import*as r from"../../models/workspace/workspace.js";import*as a from"../../panels/network/forward/forward.js";import*as s from"../../panels/application/preloading/helper/helper.js";import*as l from"../../core/root/root.js";import*as c from"../../panels/mobile_throttling/mobile_throttling.js";import*as g from"../../ui/legacy/components/utils/utils.js";import*as d from"../main/main.js";const w={showEventListenerBreakpoints:"Show Event Listener Breakpoints",eventListenerBreakpoints:"Event Listener Breakpoints",showCspViolationBreakpoints:"Show CSP Violation Breakpoints",cspViolationBreakpoints:"CSP Violation Breakpoints",showXhrfetchBreakpoints:"Show XHR/fetch Breakpoints",xhrfetchBreakpoints:"XHR/fetch Breakpoints",showDomBreakpoints:"Show DOM Breakpoints",domBreakpoints:"DOM Breakpoints",showGlobalListeners:"Show Global Listeners",globalListeners:"Global Listeners",page:"Page",showPage:"Show Page",overrides:"Overrides",showOverrides:"Show Overrides",contentScripts:"Content scripts",showContentScripts:"Show Content scripts"},p=o.i18n.registerUIStrings("panels/browser_debugger/browser_debugger-meta.ts",w),m=o.i18n.getLazilyComputedLocalizedString.bind(void 0,p);let u,R;async function y(){return u||(u=await import("../../panels/browser_debugger/browser_debugger.js")),u}async function A(){return R||(R=await import("../../panels/sources/sources.js")),R}t.ViewManager.registerViewExtension({loadView:async()=>(await y()).EventListenerBreakpointsSidebarPane.EventListenerBreakpointsSidebarPane.instance(),id:"sources.eventListenerBreakpoints",location:"sources.sidebar-bottom",commandPrompt:m(w.showEventListenerBreakpoints),title:m(w.eventListenerBreakpoints),order:9,persistence:"permanent"}),t.ViewManager.registerViewExtension({loadView:async()=>new((await y()).CSPViolationBreakpointsSidebarPane.CSPViolationBreakpointsSidebarPane),id:"sources.cspViolationBreakpoints",location:"sources.sidebar-bottom",commandPrompt:m(w.showCspViolationBreakpoints),title:m(w.cspViolationBreakpoints),order:10,persistence:"permanent"}),t.ViewManager.registerViewExtension({loadView:async()=>(await y()).XHRBreakpointsSidebarPane.XHRBreakpointsSidebarPane.instance(),id:"sources.xhrBreakpoints",location:"sources.sidebar-bottom",commandPrompt:m(w.showXhrfetchBreakpoints),title:m(w.xhrfetchBreakpoints),order:5,persistence:"permanent",hasToolbar:!0}),t.ViewManager.registerViewExtension({loadView:async()=>(await y()).DOMBreakpointsSidebarPane.DOMBreakpointsSidebarPane.instance(),id:"sources.domBreakpoints",location:"sources.sidebar-bottom",commandPrompt:m(w.showDomBreakpoints),title:m(w.domBreakpoints),order:7,persistence:"permanent"}),t.ViewManager.registerViewExtension({loadView:async()=>(await y()).ObjectEventListenersSidebarPane.ObjectEventListenersSidebarPane.instance(),id:"sources.globalListeners",location:"sources.sidebar-bottom",commandPrompt:m(w.showGlobalListeners),title:m(w.globalListeners),order:8,persistence:"permanent",hasToolbar:!0}),t.ViewManager.registerViewExtension({loadView:async()=>(await y()).DOMBreakpointsSidebarPane.DOMBreakpointsSidebarPane.instance(),id:"elements.domBreakpoints",location:"elements-sidebar",commandPrompt:m(w.showDomBreakpoints),title:m(w.domBreakpoints),order:6,persistence:"permanent"}),t.ViewManager.registerViewExtension({location:"navigator-view",id:"navigator-network",title:m(w.page),commandPrompt:m(w.showPage),order:2,persistence:"permanent",loadView:async()=>(await A()).SourcesNavigator.NetworkNavigatorView.instance()}),t.ViewManager.registerViewExtension({location:"navigator-view",id:"navigator-overrides",title:m(w.overrides),commandPrompt:m(w.showOverrides),order:4,persistence:"permanent",loadView:async()=>(await A()).SourcesNavigator.OverridesNavigatorView.instance()}),t.ViewManager.registerViewExtension({location:"navigator-view",id:"navigator-contentScripts",title:m(w.contentScripts),commandPrompt:m(w.showContentScripts),order:5,persistence:"permanent",loadView:async()=>new((await A()).SourcesNavigator.ContentScriptsNavigatorView)}),t.ContextMenu.registerProvider({contextTypes:()=>[e.DOMModel.DOMNode],loadProvider:async()=>new((await y()).DOMBreakpointsSidebarPane.ContextMenuProvider),experiment:void 0}),t.Context.registerListener({contextTypes:()=>[e.DebuggerModel.DebuggerPausedDetails],loadListener:async()=>(await y()).XHRBreakpointsSidebarPane.XHRBreakpointsSidebarPane.instance()}),t.Context.registerListener({contextTypes:()=>[e.DebuggerModel.DebuggerPausedDetails],loadListener:async()=>(await y()).DOMBreakpointsSidebarPane.DOMBreakpointsSidebarPane.instance()});const k={developerResources:"Developer resources",showDeveloperResources:"Show Developer resources"},h=o.i18n.registerUIStrings("panels/developer_resources/developer_resources-meta.ts",k),P=o.i18n.getLazilyComputedLocalizedString.bind(void 0,h);let v;t.ViewManager.registerViewExtension({location:"drawer-view",id:"developer-resources",title:P(k.developerResources),commandPrompt:P(k.showDeveloperResources),order:100,persistence:"closeable",loadView:async()=>new((await async function(){return v||(v=await import("../../panels/developer_resources/developer_resources.js")),v}()).DeveloperResourcesView.DeveloperResourcesView)});const S={issues:"Issues",showIssues:"Show Issues"},T=o.i18n.registerUIStrings("panels/issues/issues-meta.ts",S),E=o.i18n.getLazilyComputedLocalizedString.bind(void 0,T);let f;async function C(){return f||(f=await import("../../panels/issues/issues.js")),f}t.ViewManager.registerViewExtension({location:"drawer-view",id:"issues-pane",title:E(S.issues),commandPrompt:E(S.showIssues),order:100,persistence:"closeable",loadView:async()=>new((await C()).IssuesPane.IssuesPane)}),i.Revealer.registerRevealer({contextTypes:()=>[n.Issue.Issue],destination:i.Revealer.RevealerDestination.ISSUES_VIEW,loadRevealer:async()=>new((await C()).IssueRevealer.IssueRevealer)});const b={resetView:"Reset view",switchToPanMode:"Switch to pan mode",switchToRotateMode:"Switch to rotate mode",zoomIn:"Zoom in",zoomOut:"Zoom out",panOrRotateUp:"Pan or rotate up",panOrRotateDown:"Pan or rotate down",panOrRotateLeft:"Pan or rotate left",panOrRotateRight:"Pan or rotate right"},N=o.i18n.registerUIStrings("panels/layer_viewer/layer_viewer-meta.ts",b),x=o.i18n.getLazilyComputedLocalizedString.bind(void 0,N);t.ActionRegistration.registerActionExtension({actionId:"layers.reset-view",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.resetView),bindings:[{shortcut:"0"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.pan-mode",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.switchToPanMode),bindings:[{shortcut:"x"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.rotate-mode",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.switchToRotateMode),bindings:[{shortcut:"v"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.zoom-in",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.zoomIn),bindings:[{shortcut:"Shift+Plus"},{shortcut:"NumpadPlus"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.zoom-out",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.zoomOut),bindings:[{shortcut:"Shift+Minus"},{shortcut:"NumpadMinus"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.up",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.panOrRotateUp),bindings:[{shortcut:"Up"},{shortcut:"w"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.down",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.panOrRotateDown),bindings:[{shortcut:"Down"},{shortcut:"s"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.left",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.panOrRotateLeft),bindings:[{shortcut:"Left"},{shortcut:"a"}]}),t.ActionRegistration.registerActionExtension({actionId:"layers.right",category:t.ActionRegistration.ActionCategory.LAYERS,title:x(b.panOrRotateRight),bindings:[{shortcut:"Right"},{shortcut:"d"}]});const L={throttling:"Throttling",showThrottling:"Show Throttling",goOffline:"Go offline",device:"device",throttlingTag:"throttling",enableSlowGThrottling:"Enable slow `3G` throttling",enableFastGThrottling:"Enable fast `3G` throttling",goOnline:"Go online"},I=o.i18n.registerUIStrings("panels/mobile_throttling/mobile_throttling-meta.ts",L),D=o.i18n.getLazilyComputedLocalizedString.bind(void 0,I);let V;async function M(){return V||(V=await import("../../panels/mobile_throttling/mobile_throttling.js")),V}t.ViewManager.registerViewExtension({location:"settings-view",id:"throttling-conditions",title:D(L.throttling),commandPrompt:D(L.showThrottling),order:35,loadView:async()=>new((await M()).ThrottlingSettingsTab.ThrottlingSettingsTab),settings:["customNetworkConditions"]}),t.ActionRegistration.registerActionExtension({actionId:"network-conditions.network-offline",category:t.ActionRegistration.ActionCategory.NETWORK,title:D(L.goOffline),loadActionDelegate:async()=>new((await M()).ThrottlingManager.ActionDelegate),tags:[D(L.device),D(L.throttlingTag)]}),t.ActionRegistration.registerActionExtension({actionId:"network-conditions.network-low-end-mobile",category:t.ActionRegistration.ActionCategory.NETWORK,title:D(L.enableSlowGThrottling),loadActionDelegate:async()=>new((await M()).ThrottlingManager.ActionDelegate),tags:[D(L.device),D(L.throttlingTag)]}),t.ActionRegistration.registerActionExtension({actionId:"network-conditions.network-mid-tier-mobile",category:t.ActionRegistration.ActionCategory.NETWORK,title:D(L.enableFastGThrottling),loadActionDelegate:async()=>new((await M()).ThrottlingManager.ActionDelegate),tags:[D(L.device),D(L.throttlingTag)]}),t.ActionRegistration.registerActionExtension({actionId:"network-conditions.network-online",category:t.ActionRegistration.ActionCategory.NETWORK,title:D(L.goOnline),loadActionDelegate:async()=>new((await M()).ThrottlingManager.ActionDelegate),tags:[D(L.device),D(L.throttlingTag)]}),i.Settings.registerSettingExtension({storageType:i.Settings.SettingStorageType.Synced,settingName:"customNetworkConditions",settingType:i.Settings.SettingType.ARRAY,defaultValue:[]});const B={showNetwork:"Show Network",network:"Network",showNetworkRequestBlocking:"Show Network request blocking",networkRequestBlocking:"Network request blocking",showNetworkConditions:"Show Network conditions",networkConditions:"Network conditions",diskCache:"disk cache",networkThrottling:"network throttling",showSearch:"Show Search",search:"Search",recordNetworkLog:"Record network log",stopRecordingNetworkLog:"Stop recording network log",hideRequestDetails:"Hide request details",colorcodeResourceTypes:"Color-code resource types",colorCode:"color code",resourceType:"resource type",colorCodeByResourceType:"Color code by resource type",useDefaultColors:"Use default colors",groupNetworkLogByFrame:"Group network log by frame",netWork:"network",frame:"frame",group:"group",groupNetworkLogItemsByFrame:"Group network log items by frame",dontGroupNetworkLogItemsByFrame:"Don't group network log items by frame",clear:"Clear network log",addNetworkRequestBlockingPattern:"Add network request blocking pattern",removeAllNetworkRequestBlockingPatterns:"Remove all network request blocking patterns"},O=o.i18n.registerUIStrings("panels/network/network-meta.ts",B),F=o.i18n.getLazilyComputedLocalizedString.bind(void 0,O);let _;async function U(){return _||(_=await import("../../panels/network/network.js")),_}function j(e){return void 0===_?[]:e(_)}t.ViewManager.registerViewExtension({location:"panel",id:"network",commandPrompt:F(B.showNetwork),title:F(B.network),order:40,loadView:async()=>(await U()).NetworkPanel.NetworkPanel.instance()}),globalThis.chii||(t.ViewManager.registerViewExtension({location:"drawer-view",id:"network.blocked-urls",commandPrompt:F(B.showNetworkRequestBlocking),title:F(B.networkRequestBlocking),persistence:"closeable",order:60,loadView:async()=>new((await U()).BlockedURLsPane.BlockedURLsPane)}),t.ViewManager.registerViewExtension({location:"drawer-view",id:"network.config",commandPrompt:F(B.showNetworkConditions),title:F(B.networkConditions),persistence:"closeable",order:40,tags:[F(B.diskCache),F(B.networkThrottling),o.i18n.lockedLazyString("useragent"),o.i18n.lockedLazyString("user agent"),o.i18n.lockedLazyString("user-agent")],loadView:async()=>(await U()).NetworkConfigView.NetworkConfigView.instance()})),t.ViewManager.registerViewExtension({location:"network-sidebar",id:"network.search-network-tab",commandPrompt:F(B.showSearch),title:F(B.search),persistence:"permanent",loadView:async()=>(await U()).NetworkPanel.SearchNetworkView.instance()}),t.ActionRegistration.registerActionExtension({actionId:"network.toggle-recording",category:t.ActionRegistration.ActionCategory.NETWORK,iconClass:"record-start",toggleable:!0,toggledIconClass:"record-stop",toggleWithRedColor:!0,contextTypes:()=>j((e=>[e.NetworkPanel.NetworkPanel])),loadActionDelegate:async()=>new((await U()).NetworkPanel.ActionDelegate),options:[{value:!0,title:F(B.recordNetworkLog)},{value:!1,title:F(B.stopRecordingNetworkLog)}],bindings:[{shortcut:"Ctrl+E",platform:"windows,linux"},{shortcut:"Meta+E",platform:"mac"}]}),t.ActionRegistration.registerActionExtension({actionId:"network.clear",category:t.ActionRegistration.ActionCategory.NETWORK,title:F(B.clear),iconClass:"clear",loadActionDelegate:async()=>new((await U()).NetworkPanel.ActionDelegate),contextTypes:()=>j((e=>[e.NetworkPanel.NetworkPanel])),bindings:[{shortcut:"Ctrl+L"},{shortcut:"Meta+K",platform:"mac"}]}),t.ActionRegistration.registerActionExtension({actionId:"network.hide-request-details",category:t.ActionRegistration.ActionCategory.NETWORK,title:F(B.hideRequestDetails),contextTypes:()=>j((e=>[e.NetworkPanel.NetworkPanel])),loadActionDelegate:async()=>new((await U()).NetworkPanel.ActionDelegate),bindings:[{shortcut:"Esc"}]}),t.ActionRegistration.registerActionExtension({actionId:"network.search",category:t.ActionRegistration.ActionCategory.NETWORK,title:F(B.search),contextTypes:()=>j((e=>[e.NetworkPanel.NetworkPanel])),loadActionDelegate:async()=>new((await U()).NetworkPanel.ActionDelegate),bindings:[{platform:"mac",shortcut:"Meta+F",keybindSets:["devToolsDefault","vsCode"]},{platform:"windows,linux",shortcut:"Ctrl+F",keybindSets:["devToolsDefault","vsCode"]}]}),t.ActionRegistration.registerActionExtension({actionId:"network.add-network-request-blocking-pattern",category:t.ActionRegistration.ActionCategory.NETWORK,title:F(B.addNetworkRequestBlockingPattern),iconClass:"plus",contextTypes:()=>j((e=>[e.BlockedURLsPane.BlockedURLsPane])),loadActionDelegate:async()=>new((await U()).BlockedURLsPane.ActionDelegate)}),t.ActionRegistration.registerActionExtension({actionId:"network.remove-all-network-request-blocking-patterns",category:t.ActionRegistration.ActionCategory.NETWORK,title:F(B.removeAllNetworkRequestBlockingPatterns),iconClass:"clear",contextTypes:()=>j((e=>[e.BlockedURLsPane.BlockedURLsPane])),loadActionDelegate:async()=>new((await U()).BlockedURLsPane.ActionDelegate)}),i.Settings.registerSettingExtension({category:i.Settings.SettingCategory.NETWORK,storageType:i.Settings.SettingStorageType.Synced,title:F(B.colorcodeResourceTypes),settingName:"networkColorCodeResourceTypes",settingType:i.Settings.SettingType.BOOLEAN,defaultValue:!1,tags:[F(B.colorCode),F(B.resourceType)],options:[{value:!0,title:F(B.colorCodeByResourceType)},{value:!1,title:F(B.useDefaultColors)}]}),i.Settings.registerSettingExtension({category:i.Settings.SettingCategory.NETWORK,storageType:i.Settings.SettingStorageType.Synced,title:F(B.groupNetworkLogByFrame),settingName:"network.group-by-frame",settingType:i.Settings.SettingType.BOOLEAN,defaultValue:!1,tags:[F(B.netWork),F(B.frame),F(B.group)],options:[{value:!0,title:F(B.groupNetworkLogItemsByFrame)},{value:!1,title:F(B.dontGroupNetworkLogItemsByFrame)}]}),t.ViewManager.registerLocationResolver({name:"network-sidebar",category:t.ViewManager.ViewLocationCategory.NETWORK,loadResolver:async()=>(await U()).NetworkPanel.NetworkPanel.instance()}),t.ContextMenu.registerProvider({contextTypes:()=>[e.NetworkRequest.NetworkRequest,e.Resource.Resource,r.UISourceCode.UISourceCode],loadProvider:async()=>(await U()).NetworkPanel.NetworkPanel.instance(),experiment:void 0}),i.Revealer.registerRevealer({contextTypes:()=>[e.NetworkRequest.NetworkRequest],destination:i.Revealer.RevealerDestination.NETWORK_PANEL,loadRevealer:async()=>new((await U()).NetworkPanel.RequestRevealer)}),i.Revealer.registerRevealer({contextTypes:()=>[a.UIRequestLocation.UIRequestLocation],destination:void 0,loadRevealer:async()=>new((await U()).NetworkPanel.RequestLocationRevealer)}),i.Revealer.registerRevealer({contextTypes:()=>[a.NetworkRequestId.NetworkRequestId],destination:i.Revealer.RevealerDestination.NETWORK_PANEL,loadRevealer:async()=>new((await U()).NetworkPanel.RequestIdRevealer)}),i.Revealer.registerRevealer({contextTypes:()=>[a.UIFilter.UIRequestFilter],destination:i.Revealer.RevealerDestination.NETWORK_PANEL,loadRevealer:async()=>new((await U()).NetworkPanel.NetworkLogWithFilterRevealer)});const q={application:"Application",showApplication:"Show Application",pwa:"pwa",clearSiteData:"Clear site data",clearSiteDataIncludingThirdparty:"Clear site data (including third-party cookies)",startRecordingEvents:"Start recording events",stopRecordingEvents:"Stop recording events"},W=o.i18n.registerUIStrings("panels/application/application-meta.ts",q),z=o.i18n.getLazilyComputedLocalizedString.bind(void 0,W);let K;async function G(){return K||(K=await import("../../panels/application/application.js")),K}t.ViewManager.registerViewExtension({location:"panel",id:"resources",title:z(q.application),commandPrompt:z(q.showApplication),order:70,loadView:async()=>(await G()).ResourcesPanel.ResourcesPanel.instance(),tags:[z(q.pwa)]}),t.ActionRegistration.registerActionExtension({category:t.ActionRegistration.ActionCategory.RESOURCES,actionId:"resources.clear",title:z(q.clearSiteData),loadActionDelegate:async()=>new((await G()).StorageView.ActionDelegate)}),t.ActionRegistration.registerActionExtension({category:t.ActionRegistration.ActionCategory.RESOURCES,actionId:"resources.clear-incl-third-party-cookies",title:z(q.clearSiteDataIncludingThirdparty),loadActionDelegate:async()=>new((await G()).StorageView.ActionDelegate)}),t.ActionRegistration.registerActionExtension({actionId:"background-service.toggle-recording",iconClass:"record-start",toggleable:!0,toggledIconClass:"record-stop",toggleWithRedColor:!0,contextTypes:()=>void 0===K?[]:(e=>[e.BackgroundServiceView.BackgroundServiceView])(K),loadActionDelegate:async()=>new((await G()).BackgroundServiceView.ActionDelegate),category:t.ActionRegistration.ActionCategory.BACKGROUND_SERVICES,options:[{value:!0,title:z(q.startRecordingEvents)},{value:!1,title:z(q.stopRecordingEvents)}],bindings:[{platform:"windows,linux",shortcut:"Ctrl+E"},{platform:"mac",shortcut:"Meta+E"}]}),i.Revealer.registerRevealer({contextTypes:()=>[e.Resource.Resource],destination:i.Revealer.RevealerDestination.APPLICATION_PANEL,loadRevealer:async()=>new((await G()).ResourcesPanel.ResourceRevealer)}),i.Revealer.registerRevealer({contextTypes:()=>[e.ResourceTreeModel.ResourceTreeFrame],destination:i.Revealer.RevealerDestination.APPLICATION_PANEL,loadRevealer:async()=>new((await G()).ResourcesPanel.FrameDetailsRevealer)}),i.Revealer.registerRevealer({contextTypes:()=>[s.PreloadingForward.RuleSetView],destination:i.Revealer.RevealerDestination.APPLICATION_PANEL,loadRevealer:async()=>new((await G()).ResourcesPanel.RuleSetViewRevealer)}),i.Revealer.registerRevealer({contextTypes:()=>[s.PreloadingForward.AttemptViewWithFilter],destination:i.Revealer.RevealerDestination.APPLICATION_PANEL,loadRevealer:async()=>new((await G()).ResourcesPanel.AttemptViewWithFilterRevealer)});const Y={performance:"Performance",showPerformance:"Show Performance",javascriptProfiler:"JavaScript Profiler",showJavascriptProfiler:"Show JavaScript Profiler",record:"Record",stop:"Stop",startProfilingAndReloadPage:"Start profiling and reload page",saveProfile:"Save profile…",loadProfile:"Load profile…",previousFrame:"Previous frame",nextFrame:"Next frame",showRecentTimelineSessions:"Show recent timeline sessions",previousRecording:"Previous recording",nextRecording:"Next recording",hideChromeFrameInLayersView:"Hide `chrome` frame in Layers view",startStopRecording:"Start/stop recording"},H=o.i18n.registerUIStrings("panels/timeline/timeline-meta.ts",Y),J=o.i18n.getLazilyComputedLocalizedString.bind(void 0,H);let X,Z;async function Q(){return X||(X=await import("../../panels/timeline/timeline.js")),X}async function $(){return Z||(Z=await import("../../panels/profiler/profiler.js")),Z}function ee(e){return void 0===X?[]:e(X)}t.ViewManager.registerViewExtension({location:"panel",id:"timeline",title:J(Y.performance),commandPrompt:J(Y.showPerformance),order:50,loadView:async()=>(await Q()).TimelinePanel.TimelinePanel.instance()}),t.ViewManager.registerViewExtension({location:"panel",id:"js_profiler",title:J(Y.javascriptProfiler),commandPrompt:J(Y.showJavascriptProfiler),persistence:"closeable",order:65,experiment:l.Runtime.ExperimentName.JS_PROFILER_TEMP_ENABLE,loadView:async()=>(await $()).ProfilesPanel.JSProfilerPanel.instance()}),t.ActionRegistration.registerActionExtension({actionId:"timeline.toggle-recording",category:t.ActionRegistration.ActionCategory.PERFORMANCE,iconClass:"record-start",toggleable:!0,toggledIconClass:"record-stop",toggleWithRedColor:!0,contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),options:[{value:!0,title:J(Y.record)},{value:!1,title:J(Y.stop)}],bindings:[{platform:"windows,linux",shortcut:"Ctrl+E"},{platform:"mac",shortcut:"Meta+E"}]}),t.ActionRegistration.registerActionExtension({actionId:"timeline.record-reload",iconClass:"refresh",contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),category:t.ActionRegistration.ActionCategory.PERFORMANCE,title:J(Y.startProfilingAndReloadPage),loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),bindings:[{platform:"windows,linux",shortcut:"Ctrl+Shift+E"},{platform:"mac",shortcut:"Meta+Shift+E"}]}),t.ActionRegistration.registerActionExtension({category:t.ActionRegistration.ActionCategory.PERFORMANCE,actionId:"timeline.save-to-file",contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),title:J(Y.saveProfile),bindings:[{platform:"windows,linux",shortcut:"Ctrl+S"},{platform:"mac",shortcut:"Meta+S"}]}),t.ActionRegistration.registerActionExtension({category:t.ActionRegistration.ActionCategory.PERFORMANCE,actionId:"timeline.load-from-file",contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),title:J(Y.loadProfile),bindings:[{platform:"windows,linux",shortcut:"Ctrl+O"},{platform:"mac",shortcut:"Meta+O"}]}),t.ActionRegistration.registerActionExtension({actionId:"timeline.jump-to-previous-frame",category:t.ActionRegistration.ActionCategory.PERFORMANCE,title:J(Y.previousFrame),contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),bindings:[{shortcut:"["}]}),t.ActionRegistration.registerActionExtension({actionId:"timeline.jump-to-next-frame",category:t.ActionRegistration.ActionCategory.PERFORMANCE,title:J(Y.nextFrame),contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),bindings:[{shortcut:"]"}]}),t.ActionRegistration.registerActionExtension({actionId:"timeline.show-history",loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),category:t.ActionRegistration.ActionCategory.PERFORMANCE,title:J(Y.showRecentTimelineSessions),contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),bindings:[{platform:"windows,linux",shortcut:"Ctrl+H"},{platform:"mac",shortcut:"Meta+Y"}]}),t.ActionRegistration.registerActionExtension({actionId:"timeline.previous-recording",category:t.ActionRegistration.ActionCategory.PERFORMANCE,loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),title:J(Y.previousRecording),contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),bindings:[{platform:"windows,linux",shortcut:"Alt+Left"},{platform:"mac",shortcut:"Meta+Left"}]}),t.ActionRegistration.registerActionExtension({actionId:"timeline.next-recording",category:t.ActionRegistration.ActionCategory.PERFORMANCE,loadActionDelegate:async()=>new((await Q()).TimelinePanel.ActionDelegate),title:J(Y.nextRecording),contextTypes:()=>ee((e=>[e.TimelinePanel.TimelinePanel])),bindings:[{platform:"windows,linux",shortcut:"Alt+Right"},{platform:"mac",shortcut:"Meta+Right"}]}),t.ActionRegistration.registerActionExtension({actionId:"profiler.js-toggle-recording",category:t.ActionRegistration.ActionCategory.JAVASCRIPT_PROFILER,title:J(Y.startStopRecording),iconClass:"record-start",toggleable:!0,toggledIconClass:"record-stop",toggleWithRedColor:!0,contextTypes:()=>void 0===Z?[]:(e=>[e.ProfilesPanel.JSProfilerPanel])(Z),loadActionDelegate:async()=>(await $()).ProfilesPanel.JSProfilerPanel.instance(),bindings:[{platform:"windows,linux",shortcut:"Ctrl+E"},{platform:"mac",shortcut:"Meta+E"}]}),i.Settings.registerSettingExtension({category:i.Settings.SettingCategory.PERFORMANCE,storageType:i.Settings.SettingStorageType.Synced,title:J(Y.hideChromeFrameInLayersView),settingName:"frameViewerHideChromeWindow",settingType:i.Settings.SettingType.BOOLEAN,defaultValue:!1}),i.Linkifier.registerLinkifier({contextTypes:()=>ee((e=>[e.CLSLinkifier.CLSRect])),loadLinkifier:async()=>(await Q()).CLSLinkifier.Linkifier.instance()}),t.ContextMenu.registerItem({location:t.ContextMenu.ItemLocation.TIMELINE_MENU_OPEN,actionId:"timeline.load-from-file",order:10}),t.ContextMenu.registerItem({location:t.ContextMenu.ItemLocation.TIMELINE_MENU_OPEN,actionId:"timeline.save-to-file",order:15});const te={main:"Main"},oe=o.i18n.registerUIStrings("entrypoints/worker_app/WorkerMain.ts",te),ie=o.i18n.getLocalizedString.bind(void 0,oe);let ne;class re{static instance(e={forceNew:null}){const{forceNew:t}=e;return ne&&!t||(ne=new re),ne}async run(){e.Connections.initMainConnection((async()=>{await e.TargetManager.TargetManager.instance().maybeAttachInitialTarget()||e.TargetManager.TargetManager.instance().createTarget("main",ie(te.main),e.Target.Type.ServiceWorker,null)}),g.TargetDetachedDialog.TargetDetachedDialog.webSocketConnectionLost),new c.NetworkPanelIndicator.NetworkPanelIndicator}}i.Runnable.registerEarlyInitializationRunnable(re.instance),e.ChildTargetManager.ChildTargetManager.install((async({target:t,waitingForDebugger:o})=>{if(t.parentTarget()||t.type()!==e.Target.Type.ServiceWorker||!o)return;const i=t.model(e.DebuggerModel.DebuggerModel);i&&(i.isReadyToPause()||await i.once(e.DebuggerModel.Events.DebuggerIsReadyToPause),i.pause())})),self.runtime=l.Runtime.Runtime.instance({forceNew:!0}),new d.MainImpl.MainImpl;
